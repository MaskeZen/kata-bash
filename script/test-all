#!/bin/bash
source bin/add

assert_equal() {
    local expected="$1"; shift
    local actual="$1"
    if [[ "$expected" != "$actual" ]] 
    then
        any_failure=true
        echo "$(tput setaf 1)FAIL$(tput setaf sgr0)"
        diff -u <(echo "$expected") <(echo "$actual")
    else
        echo "$(tput setaf 2)PASS$(tput setaf sgr0)"
    fi
}
finish() {
    if [[ "$any_failure" == true ]]
    then
        return 1
    else
        return 0
    fi
}

assert_equal "1" "$(add "1")"
assert_equal "2" "$(add "2")"
assert_equal "5" "$(add "2,3")"
assert_equal "7" "$(add "5,2")"
assert_equal "12" "$(add "5,2,5")"
assert_equal "" "$(source bin/add)"
assert_equal 1 1
assert_equal "1" "$(bin/add 1)"

finish
